<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TP d'introduction à PHP - Site Vitrine GRAD</title>
    <link rel="stylesheet" href="TP_PHP.css">
</head>
<body>
<h1 id="tp-dintroduction-à-php---site-vitrine-grad">TP d’introduction à
PHP - Site Vitrine GRAD</h1>
<h2 id="objectifs-pédagogiques">Objectifs pédagogiques</h2>
<p>Ce TP vous permettra de découvrir PHP, un langage de programmation
côté serveur, en transformant progressivement un site web statique en
site dynamique. Vous apprendrez les concepts fondamentaux de PHP :
inclusion de fichiers, boucles, traitement de formulaires et interaction
avec une base de données.</p>
<h2 id="introduction">Introduction</h2>
<h3 id="quest-ce-que-php">Qu’est-ce que PHP ?</h3>
<p>PHP (Hypertext Preprocessor) est un langage de programmation côté
serveur. Contrairement aux langages côté client comme JavaScript, PHP
s’exécute sur le serveur web avant que la page ne soit envoyée au
navigateur.</p>
<p><strong>Point important</strong> : Le client (votre navigateur) ne
reçoit jamais le code PHP, uniquement le résultat HTML généré par PHP.
Vous pouvez le vérifier en affichant le code source d’une page PHP dans
votre navigateur : vous ne verrez que du HTML.</p>
<h3 id="vérification-de-lenvironnement-de-travail">Vérification de
l’environnement de travail</h3>
<p>Avant de commencer, vérifions que votre environnement PHP est
correctement configuré.</p>
<ol type="1">
<li>Créez un fichier nommé <code>test.php</code> dans votre dossier
<code>public_html</code></li>
<li>Ajoutez le code suivant dans ce fichier :</li>
</ol>
<div class="sourceCode" id="cb1"><pre
class="sourceCode php"><code class="sourceCode php"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw"><?php</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">phpinfo</span>()<span class="ot">;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="kw">?></span></span></code></pre></div>
<ol start="3" type="1">
<li>Accédez à ce fichier via votre navigateur à l’adresse :
<code>http://localhost/~identifiant/test.php</code> (en remplaçant
identifiant par votre identifiant de connexion au réseau local).</li>
<li>Vous devriez voir s’afficher une page contenant toutes les
informations de configuration PHP</li>
</ol>
<p>Si cette page s’affiche correctement, votre environnement est prêt.
Supprimez ensuite ce fichier <code>test.php</code> pour des raisons de
sécurité.</p>
<hr />
<h2 id="étape-1-inclusion-de-texte-avec-php">Étape 1 : Inclusion de
texte avec PHP</h2>
<h3 id="objectif">Objectif</h3>
<p>Utiliser PHP pour insérer dynamiquement le contenu texte de la page
d’accueil.</p>
<h3 id="instructions">Instructions</h3>
<ol type="1">
<li><p>Ouvrez le fichier <code>page_d_accueil.html</code> et repérez le
contenu textuel principal (lignes 29-41). Il s’agit du texte présent
dans la div <code>descetp</code>.</p></li>
<li><p>Extrayez ce texte et créez un nouveau fichier nommé
<code>accueil.txt</code> contenant uniquement le texte suivant
:</p></li>
</ol>
<pre><code>GRAD, VOTRE SPÉCIALISTE BOIS<br>
La société grad est une entreprise de création d'équipements extérieurs implantée depuis 1988 en Alsace, au Nord de Strasbourg.<br>
Spécialisée dans les aménagements extérieurs en mix-matières bois, grès cérame, aluminium, Inox, verre… et pionniers dans la terrasse, nous occupons depuis 2005 la place de leader national dans ce domaine.<br>
« Nous occupons depuis 2005 la place de leader national »<br>
Notre savoir-faire et notre esprit d'innovation nous valent une réputation d'excellence qui dépasse les frontières du pays avec de nombreux concepts brevetés.<br>
Le développement européen est en cours avec déjà des implantations fortes en Allemagne, Autriche, Suisse et Belgique.<br>
Forts de plus de 25 années expériences,nous pouvons aujourd'hui prétendre apporter la solution aux demandes les plus pointues, les plus originales, les plus novatrices…<br>
La prise de participation par l'entreprise alsacienne Burger, depuis avril 2016, nous permettra d'atteindre le très haut niveau de notoriété qui nous revient dans le domaine de l'aménagement de terrasse.<br>
grad c'est qui ?<br>
C'est 49 collaborateurs au siège alsacien (production, logistique, administration,…).<br>
C'est un réseau de près de 100 partenaires formés, répartis dans toute la France pour poser nos produits, chez vous.
C'est de nombreux partenaires à l'étranger pour des chantiers jusqu'au bout du monde !<br></code></pre>
<ol start="3" type="1">
<li><p>Renommez <code>page_d_accueil.html</code> en
<code>page_d_accueil.php</code></p></li>
<li><p>Dans le fichier <code>page_d_accueil.php</code>, remplacez le
contenu de la div <code>descetp</code> (lignes 28-41) par :</p></li>
</ol>
<div class="sourceCode" id="cb3"><pre
class="sourceCode php"><code class="sourceCode php"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="op"><</span>div id <span class="op">=</span><span class="st">"descetp"</span><span class="op">></span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="op"><</span><span class="ot">?</span>php <span class="kw">include</span> <span class="st">'accueil.txt'</span><span class="ot">;</span> <span class="kw">?></span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="op"></</span>div<span class="op">></span></span></code></pre></div>
<ol start="5" type="1">
<li>Testez votre page en accédant à <code>page_d_accueil.php</code> via
votre navigateur. Le texte doit s’afficher normalement.</li>
</ol>
<p><strong>Note</strong> : La fonction <code>include</code> permet
d’insérer le contenu d’un fichier dans un autre fichier PHP au moment de
l’exécution.</p>
<hr />
<h2 id="étape-2-inclusion-des-textes-de-la-page-nos-prestations">Étape 2
: Inclusion des textes de la page “Nos prestations”</h2>
<h3 id="objectif-1">Objectif</h3>
<p>Appliquer la même technique d’inclusion pour les textes de la page
“Nos prestations”.</p>
<h3 id="instructions-1">Instructions</h3>
<ol type="1">
<li><p>Ouvrez le fichier <code>nos_prestations.html</code> et repérez
les 5 textes de prestations :</p>
<ul>
<li>Les aménagements d’espace (lignes 30-35)</li>
<li>Les escaliers (lignes 42-48)</li>
<li>Les garde-corps (lignes 55-61)</li>
<li>Les palissades (lignes 68-74)</li>
<li>Les planchers (lignes 81-87)</li>
</ul></li>
<li><p>Créez 5 fichiers texte correspondants :
<code>prestation1.txt</code> etc.</p></li>
<li><p>N’oubliez pas de renommer <code>nos_prestations.html</code> en
<code>nos_prestations.php</code></p></li>
<li><p>Remplacez chaque bloc de texte par une inclusion PHP.</p></li>
</ol>
<hr />
<h2 id="étape-3-création-dun-header-réutilisable">Étape 3 : Création
d’un header réutilisable</h2>
<h3 id="objectif-2">Objectif</h3>
<p>Créer un fichier header réutilisable pour éviter la duplication de
code dans chaque page.</p>
<h3 id="instructions-2">Instructions</h3>
<ol type="1">
<li><p>Examinez le header de n’importe quelle page HTML. Vous
constaterez qu’il est identique sur toutes les pages (logo, menu de
navigation).</p></li>
<li><p>Créez un nouveau fichier <code>header.php</code> contenant le
code du header :</p></li>
</ol>
<div class="sourceCode" id="cb4"><pre
class="sourceCode php"><code class="sourceCode php"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="op"><</span><span class="fu">header</span><span class="op">></span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="op"><</span>p<span class="op">><</span>h2<span class="op">><</span><span class="ot">?</span>php <span class="kw">echo</span> <span class="va">$titre_page</span><span class="ot">;</span> <span class="kw">?></span><span class="op"></</span>h2<span class="op">></span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>        <span class="op"><</span>div id<span class="op">=</span><span class="st">"bandeaulogo"</span><span class="op">></span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>            <span class="op"><</span>img <span class="kw">class</span><span class="op">=</span><span class="st">"photo"</span> src<span class="op">=</span><span class="st">"logo_grad.jpg"</span> alt<span class="op">=</span><span class="st">"Logo"</span> width<span class="op">=</span><span class="st">"80"</span> height<span class="op">=</span><span class="st">"40"</span><span class="op">></span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>        <span class="op"></</span>div<span class="op">></span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>        <span class="op"><</span>div id<span class="op">=</span><span class="st">"menu"</span><span class="op">></span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>            <span class="op"><</span>a href<span class="op">=</span><span class="st">"page_d_accueil.php"</span> <span class="kw">class</span><span class="op">=</span><span class="st">"menuopt"</span><span class="op">></span><span class="cn">P</span>age d<span class="st">'accueil</a></span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="st">            <a href="nos_prestations.php" class="menuopt">Nos Prestations</a></span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="st">            <a href="nos_produits.php" class="menuopt">Nos Produits</a></span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="st">            <a href="nos_realisations.php" class="menuopt">Nos Réalisations</a></span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="st">            <a href="contact.php" class="menuopt">contact</a></span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="st">        </div></span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="st">    </p></span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="st"></header></span></span></code></pre></div>
<p><strong>Note</strong> : Remarquez l’utilisation de
<code><?php echo $titre_page; ?></code> pour afficher un titre
dynamique.</p>
<ol start="3" type="1">
<li>Dans chaque page PHP (<code>page_d_accueil.php</code>,
<code>nos_prestations.php</code>, etc.), remplacez le bloc
<code><header>...</header></code> par :</li>
</ol>
<div class="sourceCode" id="cb5"><pre
class="sourceCode php"><code class="sourceCode php"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw"><?php</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="va">$titre_page</span> <span class="op">=</span> <span class="st">"Page d'accueil"</span><span class="ot">;</span> <span class="co">// Adaptez le titre selon la page</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">include</span> <span class="st">'header.php'</span><span class="ot">;</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="kw">?></span></span></code></pre></div>
<ol start="4" type="1">
<li><p>N’oubliez pas de mettre à jour les liens dans le menu pour
pointer vers les fichiers <code>.php</code> au lieu de
<code>.html</code>.</p></li>
<li><p>Testez toutes vos pages pour vérifier que le header s’affiche
correctement.</p></li>
</ol>
<hr />
<h2 id="étape-4-utilisation-de-boucles-pour-les-prestations">Étape 4 :
Utilisation de boucles pour les prestations</h2>
<h3 id="objectif-3">Objectif</h3>
<p>Découvrir les boucles en PHP pour afficher les prestations de manière
dynamique.</p>
<h3 id="instructions-3">Instructions</h3>
<ol type="1">
<li>Créez un fichier <code>prestations.php</code> qui contiendra un
tableau associatif avec toutes les informations des prestations :</li>
</ol>
<div class="sourceCode" id="cb6"><pre
class="sourceCode php"><code class="sourceCode php"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw"><?php</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="va">$prestations</span> <span class="op">=</span> <span class="dt">array</span>(</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">array</span>(</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">'titre'</span> => <span class="st">'LES AMÉNAGEMENTS D</span><span class="sc">\'</span><span class="st">ESPACE'</span><span class="ot">,</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">'texte'</span> => <span class="st">'S</span><span class="sc">\'</span><span class="st">il y a bien des détails qu</span><span class="sc">\'</span><span class="st">il ne faut pas négliger, ce sont bien ceux qui constituent votre extérieur. Des bacs à plantes aux carrés potagers, des mobiliers de jardin à la cabane pour enfants, nos collections apporteront à la fois une ambiance chaleureuse et un cadre moderne.'</span><span class="ot">,</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">'image'</span> => <span class="st">'amenagement.jpg'</span><span class="ot">,</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">'alt'</span> => <span class="st">'Prestation 1'</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    )<span class="ot">,</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">array</span>(</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">'titre'</span> => <span class="st">'LES ESCALIERS'</span><span class="ot">,</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">'texte'</span> => <span class="st">'Véritable lieu de passage, l</span><span class="sc">\'</span><span class="st">escalier grad a été pensé pour vous simplifier la vie. À lui seul, il satisfait toutes les attentes que vous pourriez avoir : robustesse, stabilité et élégance. Sa surface rainurée lui confère une adhérence à toute épreuve. Adaptable en longueur et en largeur, il vous offrira un confort de déplacement très appréciable au quotidien.'</span><span class="ot">,</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">'image'</span> => <span class="st">'escalier-GC.jpg'</span><span class="ot">,</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">'alt'</span> => <span class="st">'Prestation 2'</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    )<span class="ot">,</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">array</span>(</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>        <span class="st">'titre'</span> => <span class="st">'LES GARDE-CORPS'</span><span class="ot">,</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>        <span class="st">'texte'</span> => <span class="st">'Allier la sécurité et l</span><span class="sc">\'</span><span class="st">esthétique, tel est le défi que nous avons relevé et que nous vous proposons de découvrir à travers notre vaste choix de garde-corps. Du classique au contemporain, avec des barres ou des câbles, en bois, Inox, verre ou panneaux, vous trouverez forcément votre bonheur parmi nos propositions sur mesure.'</span><span class="ot">,</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>        <span class="st">'image'</span> => <span class="st">'GC.jpg'</span><span class="ot">,</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>        <span class="st">'alt'</span> => <span class="st">'Prestation 3'</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>    )<span class="ot">,</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">array</span>(</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>        <span class="st">'titre'</span> => <span class="st">'LES PALISSADES'</span><span class="ot">,</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>        <span class="st">'texte'</span> => <span class="st">'Pour disposer de votre terrasse, à l</span><span class="sc">\'</span><span class="st">abri des regards indiscrets ou du vent, nous vous proposons un vaste choix de palissades en bois. Ces dernières pourront également être utilisées pour délimiter votre parcelle. Nos différents modèles sauront vous séduire par leur allure et leur solidité qui seront préservées au fil du temps.'</span><span class="ot">,</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>        <span class="st">'image'</span> => <span class="st">'palissade.jpg'</span><span class="ot">,</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>        <span class="st">'alt'</span> => <span class="st">'Prestation 4'</span></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>    )<span class="ot">,</span></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>    <span class="dt">array</span>(</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>        <span class="st">'titre'</span> => <span class="st">'LES PLANCHERS (TERRASSES BOIS)'</span><span class="ot">,</span></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>        <span class="st">'texte'</span> => <span class="st">'À la pointe de la technologie en matière de préservation du bois, les planchers grad ont été pensés pour satisfaire vos envies. Dotés d</span><span class="sc">\'</span><span class="st">un système de pose breveté, d</span><span class="sc">\'</span><span class="st">une fixation invisible et démontable, ils s</span><span class="sc">\'</span><span class="st">adaptent aux particularités de votre terrasse. Issus de forêts bien gérées, nos matériaux sont sélectionnés pour vous garantir des terrasses de qualité : imputrescibles, stables et pérennes.'</span><span class="ot">,</span></span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>        <span class="st">'image'</span> => <span class="st">'terrasse.jpg'</span><span class="ot">,</span></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>        <span class="st">'alt'</span> => <span class="st">'Prestation 5'</span></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>)<span class="ot">;</span></span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a><span class="kw">?></span></span></code></pre></div>
<ol start="2" type="1">
<li>Dans le fichier <code>nos_prestations.php</code>, remplacez tous les
blocs de prestations par une boucle :</li>
</ol>
<div class="sourceCode" id="cb7"><pre
class="sourceCode php"><code class="sourceCode php"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw"><?php</span> <span class="kw">include</span> <span class="st">'prestations.php'</span><span class="ot">;</span> <span class="kw">?></span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="kw"><?php</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="cf">foreach</span> (<span class="va">$prestations</span> <span class="kw">as</span> <span class="va">$prestation</span>) {</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">echo</span> <span class="st">'<div id="prestations">'</span><span class="ot">;</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">echo</span> <span class="st">'<br>'</span> <span class="op">.</span> <span class="va">$prestation</span>[<span class="st">'titre'</span>] <span class="op">.</span> <span class="st">'<br>'</span><span class="ot">;</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">echo</span> <span class="va">$prestation</span>[<span class="st">'texte'</span>] <span class="op">.</span> <span class="st">'<br></div>'</span><span class="ot">;</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">echo</span> <span class="st">'<div id="amenagement">'</span><span class="ot">;</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">echo</span> <span class="st">'<img class="photo" src="'</span> <span class="op">.</span> <span class="va">$prestation</span>[<span class="st">'image'</span>] <span class="op">.</span> <span class="st">'" alt="'</span> <span class="op">.</span> <span class="va">$prestation</span>[<span class="st">'alt'</span>] <span class="op">.</span> <span class="st">'" width="300" height="150">'</span><span class="ot">;</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">echo</span> <span class="st">'</div>'</span><span class="ot">;</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="kw">?></span></span></code></pre></div>
<p><strong>Explication</strong> : La boucle <code>foreach</code>
parcourt chaque élément du tableau <code>$prestations</code>. Pour
chaque prestation, elle affiche le titre, le texte et l’image.</p>
<ol start="3" type="1">
<li>Testez votre page <code>nos_prestations.php</code>. Vous devriez
voir les 5 prestations s’afficher correctement.</li>
</ol>
<hr />
<h2 id="étape-5-application-des-boucles-pour-les-produits">Étape 5 :
Application des boucles pour les produits</h2>
<h3 id="objectif-4">Objectif</h3>
<p>Appliquer la même technique de boucle pour la page “Nos
produits”.</p>
<h3 id="instructions-4">Instructions</h3>
<ol type="1">
<li>Créez un fichier <code>produits.php</code> contenant un tableau avec
les informations des 5 produits :</li>
</ol>
<div class="sourceCode" id="cb8"><pre
class="sourceCode php"><code class="sourceCode php"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw"><?php</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="va">$produits</span> <span class="op">=</span> <span class="dt">array</span>(</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">array</span>(</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">'nom'</span> => <span class="st">'LE DOUGLAS'</span><span class="ot">,</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">'description'</span> => <span class="st">'Cliquez sur l</span><span class="sc">\'</span><span class="st">image a droite pour afficher les informations sur le bois douglas.'</span><span class="ot">,</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">'image'</span> => <span class="st">'douglas.jpg'</span><span class="ot">,</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">'lien'</span> => <span class="st">'douglas.html'</span><span class="ot">,</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">'alt'</span> => <span class="st">'Produit 1'</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    )<span class="ot">,</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">array</span>(</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">'nom'</span> => <span class="st">'L</span><span class="sc">\'</span><span class="st">ACCOYA'</span><span class="ot">,</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">'description'</span> => <span class="st">'Cliquez sur l</span><span class="sc">\'</span><span class="st">image a droite pour afficher les informations sur le bois accoya.'</span><span class="ot">,</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">'image'</span> => <span class="st">'accoya.jpg'</span><span class="ot">,</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>        <span class="st">'lien'</span> => <span class="st">'accoya.html'</span><span class="ot">,</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>        <span class="st">'alt'</span> => <span class="st">'Produit 2'</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>    )<span class="ot">,</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">array</span>(</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>        <span class="st">'nom'</span> => <span class="st">'LE THERMOFRENE'</span><span class="ot">,</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>        <span class="st">'description'</span> => <span class="st">'Cliquez sur l</span><span class="sc">\'</span><span class="st">image a droite pour afficher les informations sur le bois Thermofrene.'</span><span class="ot">,</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>        <span class="st">'image'</span> => <span class="st">'thermofrene.jpg'</span><span class="ot">,</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>        <span class="st">'lien'</span> => <span class="st">'thermofrene.html'</span><span class="ot">,</span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>        <span class="st">'alt'</span> => <span class="st">'Produit 3'</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>    )<span class="ot">,</span></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>    <span class="dt">array</span>(</span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>        <span class="st">'nom'</span> => <span class="st">'LE THERMOPIN'</span><span class="ot">,</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>        <span class="st">'description'</span> => <span class="st">'Cliquez sur l</span><span class="sc">\'</span><span class="st">image a droite pour afficher les informations sur le bois Thermopin.'</span><span class="ot">,</span></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>        <span class="st">'image'</span> => <span class="st">'thermopin.jpg'</span><span class="ot">,</span></span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>        <span class="st">'lien'</span> => <span class="st">'thermopin.html'</span><span class="ot">,</span></span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>        <span class="st">'alt'</span> => <span class="st">'Produit 4'</span></span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>    )<span class="ot">,</span></span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>    <span class="dt">array</span>(</span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>        <span class="st">'nom'</span> => <span class="st">'LE KEBONY'</span><span class="ot">,</span></span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>        <span class="st">'description'</span> => <span class="st">'Cliquez sur l</span><span class="sc">\'</span><span class="st">image a droite pour afficher les informations sur le bois Kebony.'</span><span class="ot">,</span></span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>        <span class="st">'image'</span> => <span class="st">'kebony.jpg'</span><span class="ot">,</span></span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>        <span class="st">'lien'</span> => <span class="st">'kebony.html'</span><span class="ot">,</span></span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>        <span class="st">'alt'</span> => <span class="st">'Produit 5'</span></span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a>)<span class="ot">;</span></span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a><span class="kw">?></span></span></code></pre></div>
<ol start="2" type="1">
<li><p>Renommez <code>nos_produits.html</code> en
<code>nos_produits.php</code></p></li>
<li><p>Ajoutez le header PHP en haut du fichier (comme à l’étape
3)</p></li>
<li><p>Remplacez tous les blocs de produits par une boucle :</p></li>
</ol>
<div class="sourceCode" id="cb9"><pre
class="sourceCode php"><code class="sourceCode php"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw"><?php</span> <span class="kw">include</span> <span class="st">'produits.php'</span><span class="ot">;</span> <span class="kw">?></span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="kw"><?php</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="cf">foreach</span> (<span class="va">$produits</span> <span class="kw">as</span> <span class="va">$produit</span>) {</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">echo</span> <span class="st">'<div id="produits">'</span><span class="ot">;</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">echo</span> <span class="st">'<br>'</span> <span class="op">.</span> <span class="va">$produit</span>[<span class="st">'nom'</span>] <span class="op">.</span> <span class="st">'<br>'</span><span class="ot">;</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">echo</span> <span class="va">$produit</span>[<span class="st">'description'</span>] <span class="op">.</span> <span class="st">'<br></div>'</span><span class="ot">;</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">echo</span> <span class="st">'<div id="photoprod">'</span><span class="ot">;</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">echo</span> <span class="st">'<a href="'</span> <span class="op">.</span> <span class="va">$produit</span>[<span class="st">'lien'</span>] <span class="op">.</span> <span class="st">'">'</span><span class="ot">;</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">echo</span> <span class="st">'<img class="photo" src="'</span> <span class="op">.</span> <span class="va">$produit</span>[<span class="st">'image'</span>] <span class="op">.</span> <span class="st">'" alt="'</span> <span class="op">.</span> <span class="va">$produit</span>[<span class="st">'alt'</span>] <span class="op">.</span> <span class="st">'" width="300" height="150">'</span><span class="ot">;</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">echo</span> <span class="st">'</a></div>'</span><span class="ot">;</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="kw">?></span></span></code></pre></div>
<ol start="5" type="1">
<li>Testez votre page <code>nos_produits.php</code>.</li>
</ol>
<hr />
<h2
id="étape-6-parcours-dun-dossier-pour-afficher-les-réalisations">Étape 6
: Parcours d’un dossier pour afficher les réalisations</h2>
<h3 id="objectif-5">Objectif</h3>
<p>Découvrir comment parcourir un dossier pour afficher dynamiquement
toutes les images.</p>
<h3 id="instructions-5">Instructions</h3>
<ol type="1">
<li><p>Créez un dossier <code>img/realisations</code> dans votre
répertoire <code>public_html</code></p></li>
<li><p>Copiez toutes les images de réalisations depuis le répertoire
principal vers <code>img/realisations</code>. Vous pouvez utiliser les
images suivantes (ou toutes celles que vous souhaitez) :</p>
<ul>
<li>Accoya_11.jpg</li>
<li>accoya12.jpg</li>
<li>accoya_15.jpg</li>
<li>accoya_16.jpg</li>
<li>garde-corps01.jpg</li>
<li>garde-corps03.jpg</li>
<li>Pergola 02.jpg</li>
<li>Pergola 03.jpg</li>
<li>pergolas01.jpg</li>
<li>Terrasse accoya -06.jpg</li>
<li>Terrasse accoya .jpg</li>
<li>Terrasse Accoya08.jpg</li>
<li>Terrasse Kebony 01.jpg</li>
<li>Terrasse Kebony 04.jpg</li>
<li>Terrasse Kebony 05.jpg</li>
<li>terrasse00.jpg</li>
<li>terrasse01.jpg</li>
<li>terrasse02.jpg</li>
<li>terrasse04.jpg</li>
<li>terrasse05.jpg</li>
<li>terrasse06.jpg</li>
<li>terrasse07.jpg</li>
<li>Thermofrene -09.jpg</li>
<li>Thermofrene 03.jpg</li>
<li>Thermofrene 05.jpg</li>
<li>Thermofrene 06.jpg</li>
<li>Thermofrene 07.jpg</li>
<li>Thermofrene grisé 02.jpg</li>
<li>Thermopin 03.jpg</li>
<li>Thermopin 05.jpg</li>
<li>Thermopin01.jpg</li>
<li>Verda 01.jpg</li>
<li>Verda05.jpg</li>
<li>Verda07.jpg</li>
</ul></li>
<li><p>Renommez <code>nos_realisations.html</code> en
<code>nos_realisations.php</code></p></li>
<li><p>Ajoutez le header PHP en haut du fichier</p></li>
<li><p>Remplacez tous les blocs d’images par le code suivant qui
parcourt le dossier :</p></li>
</ol>
<div class="sourceCode" id="cb10"><pre
class="sourceCode php"><code class="sourceCode php"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw"><?php</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="va">$dossier</span> <span class="op">=</span> <span class="st">'img/realisations'</span><span class="ot">;</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="va">$fichiers</span> <span class="op">=</span> <span class="fu">scandir</span>(<span class="va">$dossier</span>)<span class="ot">;</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="va">$compteur</span> <span class="op">=</span> <span class="dv">0</span><span class="ot">;</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="kw">echo</span> <span class="st">'<div class="realisationphoto">'</span><span class="ot">;</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="cf">foreach</span> (<span class="va">$fichiers</span> <span class="kw">as</span> <span class="va">$fichier</span>) {</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Ignorer les fichiers . et ..</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="va">$fichier</span> <span class="op">!=</span> <span class="st">'.'</span> <span class="op">&&</span> <span class="va">$fichier</span> <span class="op">!=</span> <span class="st">'..'</span>) {</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Vérifier que c'est bien une image (extension jpg, jpeg, png, gif)</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>        <span class="va">$extension</span> <span class="op">=</span> <span class="fu">strtolower</span>(<span class="fu">pathinfo</span>(<span class="va">$fichier</span><span class="ot">,</span> <span class="cn">PATHINFO_EXTENSION</span>))<span class="ot">;</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="fu">in_array</span>(<span class="va">$extension</span><span class="ot">,</span> <span class="dt">array</span>(<span class="st">'jpg'</span><span class="ot">,</span> <span class="st">'jpeg'</span><span class="ot">,</span> <span class="st">'png'</span><span class="ot">,</span> <span class="st">'gif'</span>))) {</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>            <span class="kw">echo</span> <span class="st">'<img src="'</span> <span class="op">.</span> <span class="va">$dossier</span> <span class="op">.</span> <span class="st">'/'</span> <span class="op">.</span> <span class="va">$fichier</span> <span class="op">.</span> <span class="st">'" alt="" width="200" height="200">'</span><span class="ot">;</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>            <span class="va">$compteur</span><span class="op">++</span><span class="ot">;</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>            <span class="co">// Créer une nouvelle ligne toutes les 4 images</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> (<span class="va">$compteur</span> <span class="op">%</span> <span class="dv">4</span> <span class="op">==</span> <span class="dv">0</span>) {</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>                <span class="kw">echo</span> <span class="st">'</div><div class="realisationphoto">'</span><span class="ot">;</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a><span class="kw">echo</span> <span class="st">'</div>'</span><span class="ot">;</span></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a><span class="kw">?></span></span></code></pre></div>
<p><strong>Explication du code</strong> :</p>
<ul>
<li><code>scandir($dossier)</code> : liste tous les fichiers d'un dossier dans un tableau</li>
<li><code>pathinfo($fichier, PATHINFO_EXTENSION)</code> : récupère l'extension du fichier</li>
<li><code>in_array()</code> : vérifie si une valeur existe dans un tableau</li>
<li>Le modulo <code>%</code> permet de créer une nouvelle ligne toutes les 4 images</li>
</ul>
<ol start="6" type="1">
<li>Testez votre page <code>nos_realisations.php</code>. Toutes les
images du dossier devraient s’afficher automatiquement.</li>
</ol>
<hr />
<h2 id="étape-7-traitement-dun-formulaire-de-contact">Étape 7 :
Traitement d’un formulaire de contact</h2>
<h3 id="objectif-6">Objectif</h3>
<p>Créer une page de traitement qui affiche les données soumises par le
formulaire.</p>
<h3 id="instructions-6">Instructions</h3>
<ol type="1">
<li><p>Renommez <code>contact.html</code> en
<code>contact.php</code></p></li>
<li><p>Ajoutez le header PHP en haut du fichier</p></li>
<li><p>Modifiez la balise <code><form></code> pour qu’elle pointe
vers une page de traitement. Remplacez le début du formulaire par
:</p></li>
</ol>
<div class="sourceCode" id="cb11"><pre
class="sourceCode php"><code class="sourceCode php"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="op"><</span>form method<span class="op">=</span><span class="st">"POST"</span> action<span class="op">=</span><span class="st">"traitement_contact.php"</span><span class="op">></span></span></code></pre></div>
<ol start="4" type="1">
<li>Ajoutez un attribut <code>name</code> à chaque champ du formulaire.
Voici les modifications à apporter :</li>
</ol>
<div class="sourceCode" id="cb12"><pre
class="sourceCode php"><code class="sourceCode php"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="op"><</span>fieldset<span class="op">></span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    <span class="op"><</span>legend<span class="op">></span><span class="cn">N</span>om<span class="op"></</span>legend<span class="op">></span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="op"><</span>p<span class="op">><</span>label<span class="op">></span><span class="cn">N</span>om<span class="op"></</span>label<span class="op">></span> <span class="op"><</span>input type<span class="op">=</span><span class="st">"text"</span> name<span class="op">=</span><span class="st">"nom"</span> id<span class="op">=</span><span class="st">"nom"</span> value<span class="op">=</span><span class="st">""</span> required<span class="op">/></</span>p<span class="op">></span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="op"></</span>fieldset<span class="op">></span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="op"><</span>fieldset<span class="op">></span> </span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="op"><</span>legend<span class="op">></span><span class="cn">P</span>rénom<span class="op"></</span>legend<span class="op">></span>   </span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    <span class="op"><</span>p<span class="op">><</span>label<span class="op">></span><span class="cn">P</span>rénom<span class="op"></</span>label<span class="op">></span> <span class="op"><</span>input type<span class="op">=</span><span class="st">"text"</span> name<span class="op">=</span><span class="st">"prenom"</span> id<span class="op">=</span><span class="st">"prenom"</span> value<span class="op">=</span><span class="st">""</span> required<span class="op">/></</span>p<span class="op">></span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="op"></</span>fieldset<span class="op">></span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="op"><</span>fieldset<span class="op">></span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>    <span class="op"><</span>legend<span class="op">></span> <span class="cn">CP</span> <span class="op">/</span> <span class="cn">V</span>ille <span class="op"></</span>legend<span class="op">></span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    <span class="op"><</span>p<span class="op">><</span>label<span class="op">></span> <span class="cn">CP</span><span class="op"></</span>label<span class="op">></span> <span class="op"><</span>input type<span class="op">=</span><span class="st">"text"</span> name<span class="op">=</span><span class="st">"code_postal"</span> id<span class="op">=</span><span class="st">"code_postal"</span> value<span class="op">=</span><span class="st">""</span> maxlength<span class="op">=</span><span class="st">"5"</span> required <span class="op">/></span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>       <span class="op"><</span>label<span class="op">></span><span class="cn">V</span>ille<span class="op"></</span>label<span class="op">></span> <span class="op"><</span>input type<span class="op">=</span><span class="st">"text"</span> name<span class="op">=</span><span class="st">"ville"</span> id<span class="op">=</span><span class="st">"ville"</span> value<span class="op">=</span><span class="st">""</span> required<span class="op">/></</span>p<span class="op">></span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="op"></</span>fieldset<span class="op">></span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="op"><</span>fieldset<span class="op">></span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>    <span class="op"><</span>legend<span class="op">></span><span class="cn">E</span>mail<span class="op"></</span>legend<span class="op">></span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>    <span class="op"><</span>p<span class="op">><</span>label<span class="op">></span><span class="cn">E</span>mail<span class="op"></</span>label<span class="op">></span> <span class="op"><</span>input type<span class="op">=</span><span class="st">"email"</span> name<span class="op">=</span><span class="st">"email"</span> id<span class="op">=</span><span class="st">"email"</span> value<span class="op">=</span><span class="st">""</span> required <span class="op">/></</span>p<span class="op">></span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a><span class="op"></</span>fieldset<span class="op">></span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a><span class="op"><</span>fieldset<span class="op">></span> </span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>    <span class="op"><</span>legend<span class="op">></span><span class="cn">T</span>él<span class="op">.</</span>legend<span class="op">></span>      </span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>    <span class="op"><</span>p<span class="op">><</span>label<span class="op">></span><span class="cn">N</span>° <span class="cn">T</span>el<span class="op">.</</span>label<span class="op">></span> <span class="op"><</span>input type<span class="op">=</span><span class="st">"text"</span> name<span class="op">=</span><span class="st">"telephone"</span> id<span class="op">=</span><span class="st">"telephone"</span> value<span class="op">=</span><span class="st">""</span> maxlength<span class="op">=</span><span class="st">"10"</span> required<span class="op">/></</span>p<span class="op">></span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a><span class="op"></</span>fieldset<span class="op">></span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a><span class="op"><</span>fieldset<span class="op">></span></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>    <span class="op"><</span>legend<span class="op">></span><span class="cn">M</span>essages<span class="op"></</span>legend<span class="op">></span></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>    <span class="op"><</span>textarea name<span class="op">=</span><span class="st">"message"</span> id<span class="op">=</span><span class="st">"message"</span><span class="op">></</span>textarea<span class="op">></span></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a><span class="op"></</span>fieldset<span class="op">></span></span></code></pre></div>
<ol start="5" type="1">
<li>Créez un nouveau fichier <code>traitement_contact.php</code> qui
affichera les données reçues :</li>
</ol>
<div class="sourceCode" id="cb13"><pre
class="sourceCode php"><code class="sourceCode php"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="op"><!</span><span class="cn">DOCTYPE</span> html<span class="op">></span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="op"><</span>html lang<span class="op">=</span><span class="st">"fr"</span><span class="op">></span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="op"><</span>head<span class="op">></span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    <span class="op"><</span>meta http<span class="op">-</span>equiv<span class="op">=</span><span class="st">"Content-Type"</span> content<span class="op">=</span><span class="st">"text/html; charset=UTF-8"</span><span class="op">></span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    <span class="op"><</span>title<span class="op">></span><span class="cn">C</span>onfirmation de contact<span class="op"></</span>title<span class="op">></span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    <span class="op"><</span><span class="fu">link</span> rel<span class="op">=</span><span class="st">"stylesheet"</span> media<span class="op">=</span><span class="st">"screen"</span> type<span class="op">=</span><span class="st">"text/css"</span> href<span class="op">=</span><span class="st">"site_ste_grad.css"</span><span class="op">/></span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="op"></</span>head<span class="op">></span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="op"><</span>body<span class="op">></span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    <span class="op"><</span><span class="ot">?</span>php</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    <span class="va">$titre_page</span> <span class="op">=</span> <span class="st">"Confirmation"</span><span class="ot">;</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">include</span> <span class="st">'header.php'</span><span class="ot">;</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">?></span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>    <span class="op"><</span>div style<span class="op">=</span><span class="st">"padding: 20px;"</span><span class="op">></span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>        <span class="op"><</span>h1<span class="op">></span><span class="cn">M</span>erci pour votre message<span class="op"></</span>h1<span class="op">></span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>        <span class="op"><</span>p<span class="op">></span><span class="cn">N</span>ous avons bien reçu les informations suivantes <span class="ot">:</span><span class="op"></</span>p<span class="op">></span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>        <span class="op"><</span>fieldset<span class="op">></span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>            <span class="op"><</span>legend<span class="op">></span><span class="cn">I</span>nformations personnelles<span class="op"></</span>legend<span class="op">></span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>            <span class="op"><</span>p<span class="op">><</span>strong<span class="op">></span><span class="cn">N</span>om <span class="ot">:</span><span class="op"></</span>strong<span class="op">></span> <span class="op"><</span><span class="ot">?</span>php <span class="kw">echo</span> <span class="va">$_POST</span>[<span class="st">'nom'</span>]<span class="ot">;</span> <span class="kw">?></span><span class="op"></</span>p<span class="op">></span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>            <span class="op"><</span>p<span class="op">><</span>strong<span class="op">></span><span class="cn">P</span>rénom <span class="ot">:</span><span class="op"></</span>strong<span class="op">></span> <span class="op"><</span><span class="ot">?</span>php <span class="kw">echo</span> <span class="va">$_POST</span>[<span class="st">'prenom'</span>]<span class="ot">;</span> <span class="kw">?></span><span class="op"></</span>p<span class="op">></span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>            <span class="op"><</span>p<span class="op">><</span>strong<span class="op">></span><span class="cn">C</span>ode postal <span class="ot">:</span><span class="op"></</span>strong<span class="op">></span> <span class="op"><</span><span class="ot">?</span>php <span class="kw">echo</span> <span class="va">$_POST</span>[<span class="st">'code_postal'</span>]<span class="ot">;</span> <span class="kw">?></span><span class="op"></</span>p<span class="op">></span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>            <span class="op"><</span>p<span class="op">><</span>strong<span class="op">></span><span class="cn">V</span>ille <span class="ot">:</span><span class="op"></</span>strong<span class="op">></span> <span class="op"><</span><span class="ot">?</span>php <span class="kw">echo</span> <span class="va">$_POST</span>[<span class="st">'ville'</span>]<span class="ot">;</span> <span class="kw">?></span><span class="op"></</span>p<span class="op">></span></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>        <span class="op"></</span>fieldset<span class="op">></span></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>        <span class="op"><</span>fieldset<span class="op">></span></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>            <span class="op"><</span>legend<span class="op">></span><span class="cn">C</span>oordonnées<span class="op"></</span>legend<span class="op">></span></span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>            <span class="op"><</span>p<span class="op">><</span>strong<span class="op">></span><span class="cn">E</span>mail <span class="ot">:</span><span class="op"></</span>strong<span class="op">></span> <span class="op"><</span><span class="ot">?</span>php <span class="kw">echo</span> <span class="va">$_POST</span>[<span class="st">'email'</span>]<span class="ot">;</span> <span class="kw">?></span><span class="op"></</span>p<span class="op">></span></span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a>            <span class="op"><</span>p<span class="op">><</span>strong<span class="op">></span><span class="cn">T</span>éléphone <span class="ot">:</span><span class="op"></</span>strong<span class="op">></span> <span class="op"><</span><span class="ot">?</span>php <span class="kw">echo</span> <span class="va">$_POST</span>[<span class="st">'telephone'</span>]<span class="ot">;</span> <span class="kw">?></span><span class="op"></</span>p<span class="op">></span></span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>        <span class="op"></</span>fieldset<span class="op">></span></span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a>        <span class="op"><</span>fieldset<span class="op">></span></span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>            <span class="op"><</span>legend<span class="op">></span><span class="cn">M</span>essage<span class="op"></</span>legend<span class="op">></span></span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a>            <span class="op"><</span>p<span class="op">><</span><span class="ot">?</span>php <span class="kw">echo</span> <span class="fu">nl2br</span>(<span class="fu">htmlspecialchars</span>(<span class="va">$_POST</span>[<span class="st">'message'</span>]))<span class="ot">;</span> <span class="kw">?></span><span class="op"></</span>p<span class="op">></span></span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a>        <span class="op"></</span>fieldset<span class="op">></span></span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a>        <span class="op"><</span>p<span class="op">><</span>a href<span class="op">=</span><span class="st">"contact.php"</span><span class="op">></span><span class="cn">R</span>etour au formulaire<span class="op"></</span>a<span class="op">></</span>p<span class="op">></span></span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true" tabindex="-1"></a>    <span class="op"></</span>div<span class="op">></span></span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true" tabindex="-1"></a><span class="op"></</span>body<span class="op">></span></span>
<span id="cb13-40"><a href="#cb13-40" aria-hidden="true" tabindex="-1"></a><span class="op"></</span>html<span class="op">></span></span></code></pre></div>
<p><strong>Explication</strong> :</p>
<ul>
<li><code>$_POST</code> : tableau associatif contenant toutes les données envoyées par le formulaire via la méthode POST</li>
<li><code>htmlspecialchars()</code> : convertit les caractères spéciaux en entités HTML pour éviter les problèmes de sécurité</li>
<li><code>nl2br()</code> : convertit les retours à la ligne en balises <code><br></code></li>
</ul>
<ol start="6" type="1">
<li>Testez votre formulaire en remplissant tous les champs et en
cliquant sur “Send Message”. Vous devriez voir s’afficher une page de
confirmation avec toutes vos données.</li>
</ol>
<hr />
<h2 id="étape-8-création-de-la-base-de-données">Étape 8 : Création de la
base de données</h2>
<h3 id="objectif-7">Objectif</h3>
<p>Créer une base de données MySQL/MariaDB pour stocker les messages de
contact.</p>
<h3 id="instructions-7">Instructions</h3>
<ol type="1">
<li>Connectez-vous à MySQL en ligne de commande avec la commande
suivante :</li>
</ol>
<div class="sourceCode" id="cb14"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">mysql</span> <span class="at">-u</span> mysql <span class="at">-p</span></span></code></pre></div>
<p>Entrez le mot de passe quand il vous est demandé.</p>
<ol start="2" type="1">
<li>Créez une nouvelle base de données nommée <code>vitrine_grad</code>
:</li>
</ol>
<div class="sourceCode" id="cb15"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">DATABASE</span> vitrine_grad <span class="dt">CHARACTER</span> <span class="kw">SET</span> utf8mb4 COLLATE utf8mb4_unicode_ci;</span></code></pre></div>
<ol start="3" type="1">
<li>Sélectionnez cette base de données :</li>
</ol>
<div class="sourceCode" id="cb16"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="kw">USE</span> vitrine_grad;</span></code></pre></div>
<ol start="4" type="1">
<li>Créez une table <code>messages</code> avec la structure suivante
:</li>
</ol>
<div class="sourceCode" id="cb17"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> messages (</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">id</span> <span class="dt">INT</span> AUTO_INCREMENT <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    nom <span class="dt">VARCHAR</span>(<span class="dv">30</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    prenom <span class="dt">VARCHAR</span>(<span class="dv">30</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    code_postal <span class="dt">VARCHAR</span>(<span class="dv">5</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    ville <span class="dt">VARCHAR</span>(<span class="dv">30</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>    email <span class="dt">VARCHAR</span>(<span class="dv">255</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>    telephone <span class="dt">VARCHAR</span>(<span class="dv">10</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>    message TEXT <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>    date_creation DATETIME <span class="kw">DEFAULT</span> <span class="fu">CURRENT_TIMESTAMP</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>);</span></code></pre></div>
<p><strong>Explication de la structure</strong> :</p>
<ul>
<li><code>id</code> : identifiant unique auto-incrémenté (clé primaire)</li>
<li><code>nom</code>, <code>prenom</code>, <code>code_postal</code>, <code>ville</code>, <code>email</code>, <code>telephone</code> : champs texte pour les informations du formulaire</li>
<li><code>message</code> : champ texte pour le message (peut être long)</li>
<li><code>date_creation</code> : date et heure de création du message (remplie automatiquement)</li>
</ul>
<ol start="5" type="1">
<li>Vérifiez que la table a bien été créée :</li>
</ol>
<div class="sourceCode" id="cb18"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>SHOW <span class="kw">TABLES</span>;</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>DESCRIBE messages;</span></code></pre></div>
<hr />
<h2 id="étape-9-connexion-à-la-base-de-données-avec-pdo">Étape 9 :
Connexion à la base de données avec PDO</h2>
<h3 id="objectif-8">Objectif</h3>
<p>Apprendre à se connecter à une base de données MySQL avec PDO (PHP
Data Objects).</p>
<h3 id="instructions-8">Instructions</h3>
<ol type="1">
<li>Créez un fichier <code>config.php</code> qui contiendra les
paramètres de connexion à la base de données :</li>
</ol>
<div class="sourceCode" id="cb19"><pre
class="sourceCode php"><code class="sourceCode php"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="kw"><?php</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="co">// Paramètres de connexion à la base de données</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="va">$db_host</span> <span class="op">=</span> <span class="st">'localhost'</span><span class="ot">;</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="va">$db_name</span> <span class="op">=</span> <span class="st">'vitrine_grad'</span><span class="ot">;</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="va">$db_user</span> <span class="op">=</span> <span class="st">'mysql'</span><span class="ot">;</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="va">$db_pass</span> <span class="op">=</span> <span class="st">'mysql'</span><span class="ot">;</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="co">// Connexion à la base de données avec PDO</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span> {</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>    <span class="va">$pdo</span> <span class="op">=</span> <span class="kw">new</span> <span class="bu">PDO</span>(<span class="st">"mysql:host=</span><span class="va">$db_host</span><span class="st">;dbname=</span><span class="va">$db_name</span><span class="st">;charset=utf8mb4"</span><span class="ot">,</span> <span class="va">$db_user</span><span class="ot">,</span> <span class="va">$db_pass</span>)<span class="ot">;</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>    <span class="va">$pdo</span>->setAttribute(<span class="bu">PDO</span>::<span class="cn">ATTR_ERRMODE</span><span class="ot">,</span> <span class="bu">PDO</span>::<span class="cn">ERRMODE_EXCEPTION</span>)<span class="ot">;</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>    <span class="va">$pdo</span>->setAttribute(<span class="bu">PDO</span>::<span class="cn">ATTR_DEFAULT_FETCH_MODE</span><span class="ot">,</span> <span class="bu">PDO</span>::<span class="cn">FETCH_ASSOC</span>)<span class="ot">;</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>} <span class="cf">catch</span>(<span class="bu">PDOException</span> <span class="va">$e</span>) {</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">die</span>(<span class="st">"Erreur de connexion à la base de données : "</span> <span class="op">.</span> <span class="va">$e</span>->getMessage())<span class="ot">;</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a><span class="kw">?></span></span></code></pre></div>
<p><strong>Explication</strong> :</p>
<ul>
<li><code>PDO</code> : classe PHP pour se connecter à une base de données de manière sécurisée</li>
<li><code>try...catch</code> : gestion des erreurs. Si la connexion échoue, un message d'erreur s'affiche</li>
<li><code>setAttribute()</code> : configure le comportement de PDO (affichage des erreurs, format de récupération des données)</li>
</ul>
<ol start="2" type="1">
<li>Testez votre connexion en créant un fichier
<code>test_connexion.php</code> :</li>
</ol>
<div class="sourceCode" id="cb20"><pre
class="sourceCode php"><code class="sourceCode php"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="kw"><?php</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="kw">include</span> <span class="st">'config.php'</span><span class="ot">;</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="kw">echo</span> <span class="st">"Connexion à la base de données réussie !"</span><span class="ot">;</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="kw">?></span></span></code></pre></div>
<p>Si vous voyez le message “Connexion à la base de données réussie !”,
votre connexion fonctionne correctement.</p>
<hr />
<h2
id="étape-10-enregistrement-des-messages-dans-la-base-de-données">Étape
10 : Enregistrement des messages dans la base de données</h2>
<h3 id="objectif-9">Objectif</h3>
<p>Modifier la page de traitement du formulaire pour enregistrer les
données dans la base de données.</p>
<h3 id="instructions-9">Instructions</h3>
<ol type="1">
<li>Modifiez le fichier <code>traitement_contact.php</code> pour inclure
la connexion à la base de données et insérer les données :</li>
</ol>
<div class="sourceCode" id="cb21"><pre
class="sourceCode php"><code class="sourceCode php"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="op"><!</span><span class="cn">DOCTYPE</span> html<span class="op">></span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="op"><</span>html lang<span class="op">=</span><span class="st">"fr"</span><span class="op">></span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="op"><</span>head<span class="op">></span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    <span class="op"><</span>meta http<span class="op">-</span>equiv<span class="op">=</span><span class="st">"Content-Type"</span> content<span class="op">=</span><span class="st">"text/html; charset=UTF-8"</span><span class="op">></span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>    <span class="op"><</span>title<span class="op">></span><span class="cn">C</span>onfirmation de contact<span class="op"></</span>title<span class="op">></span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    <span class="op"><</span><span class="fu">link</span> rel<span class="op">=</span><span class="st">"stylesheet"</span> media<span class="op">=</span><span class="st">"screen"</span> type<span class="op">=</span><span class="st">"text/css"</span> href<span class="op">=</span><span class="st">"site_ste_grad.css"</span><span class="op">/></span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="op"></</span>head<span class="op">></span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="op"><</span>body<span class="op">></span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>    <span class="op"><</span><span class="ot">?</span>php</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>    <span class="va">$titre_page</span> <span class="op">=</span> <span class="st">"Confirmation"</span><span class="ot">;</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">include</span> <span class="st">'header.php'</span><span class="ot">;</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">include</span> <span class="st">'config.php'</span><span class="ot">;</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Récupération des données du formulaire</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>    <span class="va">$nom</span> <span class="op">=</span> <span class="va">$_POST</span>[<span class="st">'nom'</span>]<span class="ot">;</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>    <span class="va">$prenom</span> <span class="op">=</span> <span class="va">$_POST</span>[<span class="st">'prenom'</span>]<span class="ot">;</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>    <span class="va">$code_postal</span> <span class="op">=</span> <span class="va">$_POST</span>[<span class="st">'code_postal'</span>]<span class="ot">;</span></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>    <span class="va">$ville</span> <span class="op">=</span> <span class="va">$_POST</span>[<span class="st">'ville'</span>]<span class="ot">;</span></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>    <span class="va">$email</span> <span class="op">=</span> <span class="va">$_POST</span>[<span class="st">'email'</span>]<span class="ot">;</span></span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>    <span class="va">$telephone</span> <span class="op">=</span> <span class="va">$_POST</span>[<span class="st">'telephone'</span>]<span class="ot">;</span></span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>    <span class="va">$message</span> <span class="op">=</span> <span class="va">$_POST</span>[<span class="st">'message'</span>]<span class="ot">;</span></span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Préparation de la requête SQL d'insertion</span></span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>    <span class="va">$sql</span> <span class="op">=</span> <span class="st">"INSERT INTO messages (nom, prenom, code_postal, ville, email, telephone, message) </span></span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a><span class="st">            VALUES ('</span><span class="va">$nom</span><span class="st">', '</span><span class="va">$prenom</span><span class="st">', '</span><span class="va">$code_postal</span><span class="st">', '</span><span class="va">$ville</span><span class="st">', '</span><span class="va">$email</span><span class="st">', '</span><span class="va">$telephone</span><span class="st">', '</span><span class="va">$message</span><span class="st">')"</span><span class="ot">;</span></span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Exécution de la requête</span></span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span> {</span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>        <span class="va">$pdo</span>-><span class="fu">exec</span>(<span class="va">$sql</span>)<span class="ot">;</span></span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a>        <span class="va">$succes</span> <span class="op">=</span> <span class="kw">true</span><span class="ot">;</span></span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">catch</span>(<span class="bu">PDOException</span> <span class="va">$e</span>) {</span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a>        <span class="va">$succes</span> <span class="op">=</span> <span class="kw">false</span><span class="ot">;</span></span>
<span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a>        <span class="va">$erreur</span> <span class="op">=</span> <span class="va">$e</span>->getMessage()<span class="ot">;</span></span>
<span id="cb21-34"><a href="#cb21-34" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb21-35"><a href="#cb21-35" aria-hidden="true" tabindex="-1"></a>    <span class="kw">?></span></span>
<span id="cb21-36"><a href="#cb21-36" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-37"><a href="#cb21-37" aria-hidden="true" tabindex="-1"></a>    <span class="op"><</span>div style<span class="op">=</span><span class="st">"padding: 20px;"</span><span class="op">></span></span>
<span id="cb21-38"><a href="#cb21-38" aria-hidden="true" tabindex="-1"></a>        <span class="op"><</span><span class="ot">?</span>php <span class="cf">if</span> (<span class="va">$succes</span>)<span class="ot">:</span> <span class="kw">?></span></span>
<span id="cb21-39"><a href="#cb21-39" aria-hidden="true" tabindex="-1"></a>            <span class="op"><</span>h1<span class="op">></span><span class="cn">M</span>erci pour votre message<span class="op"></</span>h1<span class="op">></span></span>
<span id="cb21-40"><a href="#cb21-40" aria-hidden="true" tabindex="-1"></a>            <span class="op"><</span>p<span class="op">></span><span class="cn">V</span>otre message a bien été enregistré dans notre base de données<span class="op">.</</span>p<span class="op">></span></span>
<span id="cb21-41"><a href="#cb21-41" aria-hidden="true" tabindex="-1"></a>        <span class="op"><</span><span class="ot">?</span>php <span class="cf">else</span><span class="ot">:</span> <span class="kw">?></span></span>
<span id="cb21-42"><a href="#cb21-42" aria-hidden="true" tabindex="-1"></a>            <span class="op"><</span>h1<span class="op">></span><span class="cn">E</span>rreur<span class="op"></</span>h1<span class="op">></span></span>
<span id="cb21-43"><a href="#cb21-43" aria-hidden="true" tabindex="-1"></a>            <span class="op"><</span>p<span class="op">></span><span class="cn">U</span>ne erreur s<span class="st">'est produite lors de l'</span>enregistrement <span class="ot">:</span> <span class="op"><</span><span class="ot">?</span>php <span class="kw">echo</span> <span class="va">$erreur</span><span class="ot">;</span> <span class="kw">?></span><span class="op"></</span>p<span class="op">></span></span>
<span id="cb21-44"><a href="#cb21-44" aria-hidden="true" tabindex="-1"></a>        <span class="op"><</span><span class="ot">?</span>php <span class="cf">endif</span><span class="ot">;</span> <span class="kw">?></span></span>
<span id="cb21-45"><a href="#cb21-45" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb21-46"><a href="#cb21-46" aria-hidden="true" tabindex="-1"></a>        <span class="op"><</span>fieldset<span class="op">></span></span>
<span id="cb21-47"><a href="#cb21-47" aria-hidden="true" tabindex="-1"></a>            <span class="op"><</span>legend<span class="op">></span><span class="cn">I</span>nformations personnelles<span class="op"></</span>legend<span class="op">></span></span>
<span id="cb21-48"><a href="#cb21-48" aria-hidden="true" tabindex="-1"></a>            <span class="op"><</span>p<span class="op">><</span>strong<span class="op">></span><span class="cn">N</span>om <span class="ot">:</span><span class="op"></</span>strong<span class="op">></span> <span class="op"><</span><span class="ot">?</span>php <span class="kw">echo</span> <span class="fu">htmlspecialchars</span>(<span class="va">$nom</span>)<span class="ot">;</span> <span class="kw">?></span><span class="op"></</span>p<span class="op">></span></span>
<span id="cb21-49"><a href="#cb21-49" aria-hidden="true" tabindex="-1"></a>            <span class="op"><</span>p<span class="op">><</span>strong<span class="op">></span><span class="cn">P</span>rénom <span class="ot">:</span><span class="op"></</span>strong<span class="op">></span> <span class="op"><</span><span class="ot">?</span>php <span class="kw">echo</span> <span class="fu">htmlspecialchars</span>(<span class="va">$prenom</span>)<span class="ot">;</span> <span class="kw">?></span><span class="op"></</span>p<span class="op">></span></span>
<span id="cb21-50"><a href="#cb21-50" aria-hidden="true" tabindex="-1"></a>            <span class="op"><</span>p<span class="op">><</span>strong<span class="op">></span><span class="cn">C</span>ode postal <span class="ot">:</span><span class="op"></</span>strong<span class="op">></span> <span class="op"><</span><span class="ot">?</span>php <span class="kw">echo</span> <span class="fu">htmlspecialchars</span>(<span class="va">$code_postal</span>)<span class="ot">;</span> <span class="kw">?></span><span class="op"></</span>p<span class="op">></span></span>
<span id="cb21-51"><a href="#cb21-51" aria-hidden="true" tabindex="-1"></a>            <span class="op"><</span>p<span class="op">><</span>strong<span class="op">></span><span class="cn">V</span>ille <span class="ot">:</span><span class="op"></</span>strong<span class="op">></span> <span class="op"><</span><span class="ot">?</span>php <span class="kw">echo</span> <span class="fu">htmlspecialchars</span>(<span class="va">$ville</span>)<span class="ot">;</span> <span class="kw">?></span><span class="op"></</span>p<span class="op">></span></span>
<span id="cb21-52"><a href="#cb21-52" aria-hidden="true" tabindex="-1"></a>        <span class="op"></</span>fieldset<span class="op">></span></span>
<span id="cb21-53"><a href="#cb21-53" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb21-54"><a href="#cb21-54" aria-hidden="true" tabindex="-1"></a>        <span class="op"><</span>fieldset<span class="op">></span></span>
<span id="cb21-55"><a href="#cb21-55" aria-hidden="true" tabindex="-1"></a>            <span class="op"><</span>legend<span class="op">></span><span class="cn">C</span>oordonnées<span class="op"></</span>legend<span class="op">></span></span>
<span id="cb21-56"><a href="#cb21-56" aria-hidden="true" tabindex="-1"></a>            <span class="op"><</span>p<span class="op">><</span>strong<span class="op">></span><span class="cn">E</span>mail <span class="ot">:</span><span class="op"></</span>strong<span class="op">></span> <span class="op"><</span><span class="ot">?</span>php <span class="kw">echo</span> <span class="fu">htmlspecialchars</span>(<span class="va">$email</span>)<span class="ot">;</span> <span class="kw">?></span><span class="op"></</span>p<span class="op">></span></span>
<span id="cb21-57"><a href="#cb21-57" aria-hidden="true" tabindex="-1"></a>            <span class="op"><</span>p<span class="op">><</span>strong<span class="op">></span><span class="cn">T</span>éléphone <span class="ot">:</span><span class="op"></</span>strong<span class="op">></span> <span class="op"><</span><span class="ot">?</span>php <span class="kw">echo</span> <span class="fu">htmlspecialchars</span>(<span class="va">$telephone</span>)<span class="ot">;</span> <span class="kw">?></span><span class="op"></</span>p<span class="op">></span></span>
<span id="cb21-58"><a href="#cb21-58" aria-hidden="true" tabindex="-1"></a>        <span class="op"></</span>fieldset<span class="op">></span></span>
<span id="cb21-59"><a href="#cb21-59" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb21-60"><a href="#cb21-60" aria-hidden="true" tabindex="-1"></a>        <span class="op"><</span>fieldset<span class="op">></span></span>
<span id="cb21-61"><a href="#cb21-61" aria-hidden="true" tabindex="-1"></a>            <span class="op"><</span>legend<span class="op">></span><span class="cn">M</span>essage<span class="op"></</span>legend<span class="op">></span></span>
<span id="cb21-62"><a href="#cb21-62" aria-hidden="true" tabindex="-1"></a>            <span class="op"><</span>p<span class="op">><</span><span class="ot">?</span>php <span class="kw">echo</span> <span class="fu">nl2br</span>(<span class="fu">htmlspecialchars</span>(<span class="va">$message</span>))<span class="ot">;</span> <span class="kw">?></span><span class="op"></</span>p<span class="op">></span></span>
<span id="cb21-63"><a href="#cb21-63" aria-hidden="true" tabindex="-1"></a>        <span class="op"></</span>fieldset<span class="op">></span></span>
<span id="cb21-64"><a href="#cb21-64" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb21-65"><a href="#cb21-65" aria-hidden="true" tabindex="-1"></a>        <span class="op"><</span>p<span class="op">><</span>a href<span class="op">=</span><span class="st">"contact.php"</span><span class="op">></span><span class="cn">R</span>etour au formulaire<span class="op"></</span>a<span class="op">></</span>p<span class="op">></span></span>
<span id="cb21-66"><a href="#cb21-66" aria-hidden="true" tabindex="-1"></a>    <span class="op"></</span>div<span class="op">></span></span>
<span id="cb21-67"><a href="#cb21-67" aria-hidden="true" tabindex="-1"></a><span class="op"></</span>body<span class="op">></span></span>
<span id="cb21-68"><a href="#cb21-68" aria-hidden="true" tabindex="-1"></a><span class="op"></</span>html<span class="op">></span></span></code></pre></div>
<p><strong>Explication</strong> :</p>
<ul>
<li><code>$pdo->exec($sql)</code> : exécute une requête SQL qui ne retourne pas de résultats (comme INSERT, UPDATE, DELETE)</li>
<li>La requête SQL <code>INSERT INTO</code> ajoute une nouvelle ligne dans la table <code>messages</code></li>
<li>Les valeurs sont directement insérées dans la requête (nous verrons les requêtes préparées dans un cours ultérieur pour plus de sécurité)</li>
</ul>
<ol start="2" type="1">
<li>Testez votre formulaire en remplissant tous les champs. Après
soumission, vérifiez dans votre base de données que le message a bien
été enregistré :</li>
</ol>
<div class="sourceCode" id="cb22"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> messages;</span></code></pre></div>
<p>Vous devriez voir apparaître votre message dans la table.</p>
<hr />
<h2 id="note-sur-lutilisation-dadminer">Note sur l’utilisation
d’Adminer</h2>
<p>Toutes les opérations sur la base de données effectuées dans ce TP
peuvent également être réalisées via l’interface web Adminer qui est
déjà installée sur votre environnement. Vous avez d’ailleurs déjà
utilisé cette interface dans des travaux précédents.</p>
<p>Pour la suite de votre apprentissage, nous vous conseillons
d'utiliser Adminer pour :</p>
<ul>
<li>Vérifier la structure de vos tables</li>
<li>Consulter les données enregistrées</li>
<li>Tester vos requêtes SQL</li>
<li>Visualiser facilement les résultats de vos insertions</li>
</ul>
<p>L’interface graphique d’Adminer facilite la compréhension de la
structure de votre base de données et permet de vérifier rapidement que
vos requêtes PHP fonctionnent correctement.</p>

</body>
</html>